<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editable Resume</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">

        <h1 class="text-2xl font-semibold mb-4"> <u>PreciseCV Maker </u>   </h1>
        <!-- Personal Details -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">Personal Details</h2>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <p class="font-semibold">Name:</p>
                    <input type="text" id="name" class="form-input w-full" value="John Doe">
                </div>
                <div>
                    <p class="font-semibold">Email:</p>
                    <input type="email" id="email" class="form-input w-full" value="john.doe@example.com">
                </div>
                <div>
                    <p class="font-semibold">Address:</p>
                    <input type="text" id="address" class="form-input w-full" value="31 Smith Street, New York, Harare">
                </div>
                <div>
                    <p class="font-semibold">Phone:</p>
                    <input type="tel" id="phone" class="form-input w-full" value="(555) 555-5555">
                </div>
                <div>
                    <p class="font-semibold">Date of Birth:</p>
                    <input type="text" id="dateOfBirth" class="form-input w-full" value="09/07/2000">
                </div>
                <div>
                    <p class="font-semibold">Gender:</p>
                    <input type="text" id="gender" class="form-input w-full" value="Other">
                </div>
                <div>
                    <p class="font-semibold">Marital Status:</p>
                    <input type="text" id="maritalStatus" class="form-input w-full" value="Divorced">
                </div>
            </div>
        </div>

        <!-- Education -->
        <div class="mb-8" id="educationSection">
            <h2 class="text-2xl font-semibold mb-4">Education</h2>
            <div id="educationContainer">
                <div class="education">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <p class="font-semibold">School Name:</p>
                            <input type="text" class="form-input w-full school" placeholder="School Name">

                            <p class="font-semibold">Level:</p>
                            <input type="text" class="form-input w-full level" placeholder="Level">


                            <p class="font-semibold mt-2">Duration:</p>
                            <input type="text" class="form-input w-full duration mt-2" placeholder="Duration">

                            <p class="font-semibold mt-2">Subject:</p>
                            <input type="text" class="form-input w-full subject mt-2" placeholder="Subject">

                            <p class="font-semibold mt-2">Score:</p>
                            <input type="text" class="form-input w-full score mt-2" placeholder="Score">
                        </div>
                    </div>
                </div>
            </div>
            <button id="addEducation" class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Add Education</button>
        </div>

        <!-- Work Experience -->
        <div class="mb-8" id="workExperienceSection">
            <h2 class="text-2xl font-semibold mb-4">Work Experience</h2>
            <div id="workExperienceContainer">
                <div class="work-experience">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <p class="font-semibold">Position:</p>
                            <input type="text" class="form-input w-full position" placeholder="Position">

                            <p class="font-semibold mt-2">Company:</p>
                            <input type="text" class="form-input w-full company mt-2" placeholder="Company">

                            <p class="font-semibold mt-2">Duration:</p>
                            <input type="text" class="form-input w-full duration mt-2" placeholder="Duration">

                            <p class="font-semibold mt-2">Responsibility:</p>
                            <textarea class="form-input w-full responsibility mt-2" rows="4" cols="50" placeholder="Responsibility"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <button id="addExperience" class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Add Experience</button>
        </div>

        <!-- Work Reference -->
        <div class="mb-8" id="workReferenceSection">
            <h2 class="text-2xl font-semibold mb-4">Work Reference</h2>
            <div id="workReferenceContainer">
                <div class="work-reference">
                    <label for="position" class="block font-semibold">Position:</label>
                    <input type="text" id="position" class="form-input w-full position" placeholder="Position" >
                
                    <label for="company" class="block font-semibold mt-2">Company:</label>
                    <input type="text" id="company" class="form-input w-full company mt-2" placeholder="Company">
                
                    <label for="duration" class="block font-semibold mt-2">Duration:</label>
                    <input type="text" id="duration" class="form-input w-full duration mt-2" placeholder="Duration" >
                
                    <label for="contact-name" class="block font-semibold mt-2">Contact Name:</label>
                    <input type="text" id="contact-name" class="form-input w-full contact-name mt-2" placeholder="Contact Name">
                
                    <label for="contact-surname" class="block font-semibold mt-2">Contact Surname:</label>
                    <input type="text" id="contact-surname" class="form-input w-full contact-surname mt-2" placeholder="Contact Surname" >
                
                    <label for="contact-email" class="block font-semibold mt-2">Contact Email:</label>
                    <input type="email" id="contact-email" class="form-input w-full contact-email mt-2" placeholder="Contact Email">
                
                    <label for="contact-phone" class="block font-semibold mt-2">Contact Phone:</label>
                    <input type="tel" id="contact-phone" class="form-input w-full contact-phone mt-2" placeholder="Contact Phone">
                
                    <label for="contact-position" class="block font-semibold mt-2">Contact Position:</label>
                    <input type="text" id="contact-position" class="form-input w-full contact-position mt-2" placeholder="Contact Position">
                </div>
            </div>
            <button id="addPosition" class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Add Position</button>
        </div>

        <!-- Skills -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">Skills</h2>
            <div id="skillsContainer">
                <div class="grid grid-cols-2 gap-4" id="skillInputs">
                   
                    <div>
                        <label for="skill6" class="font-semibold">Skill 1:</label>
                        <input type="text" id="skill6" class="form-input w-full skill" placeholder="Skill 1"">
                    </div>
                </div>
            </div>
            <button id="addSkill" class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Add Skill</button>
        </div>
        <button id="save" class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">GENERATE CV</button>
    </div>

    <script>

        //Work Reference JS
        document.addEventListener('DOMContentLoaded', function() {
            const addButton = document.getElementById('addPosition');
            const workReferenceContainer = document.getElementById('workReferenceContainer');

            addButton.addEventListener('click', function() {
                const workReference = document.createElement('div');
                workReference.classList.add('work-reference');
                workReference.innerHTML = `
                <div class="relative">
                                            <button class="absolute right-0 top-0 mt-1 mr-1 bg-red-500 text-white text-xs px-2 py-1 rounded">Remove</button>
                                        </div>
                <br/><br/>
                    <label for="position" class="block font-semibold">Position:</label>
                    <input type="text" id="position" class="form-input w-full position" placeholder="Position">

                    <label for="company" class="block font-semibold mt-2">Company:</label>
                    <input type="text" id="company" class="form-input w-full company mt-2" placeholder="Company">

                    <label for="duration" class="block font-semibold mt-2">Duration:</label>
                    <input type="text" id="duration" class="form-input w-full duration mt-2" placeholder="Duration">

                    <label for="contact-name" class="block font-semibold mt-2">Contact Name:</label>
                    <input type="text" id="contact-name" class="form-input w-full contact-name mt-2" placeholder="Contact Name">

                    <label for="contact-surname" class="block font-semibold mt-2">Contact Surname:</label>
                    <input type="text" id="contact-surname" class="form-input w-full contact-surname mt-2" placeholder="Contact Surname">

                    <label for="contact-email" class="block font-semibold mt-2">Contact Email:</label>
                    <input type="email" id="contact-email" class="form-input w-full contact-email mt-2" placeholder="Contact Email">

                    <label for="contact-phone" class="block font-semibold mt-2">Contact Phone:</label>
                    <input type="tel" id="contact-phone" class="form-input w-full contact-phone mt-2" placeholder="Contact Phone">

                    <label for="contact-position" class="block font-semibold mt-2">Contact Position:</label>
                    <input type="text" id="contact-position" class="form-input w-full contact-position mt-2" placeholder="Contact Position">
                `;
                workReferenceContainer.appendChild(workReference);

                const removeButton = workReference.querySelector('.relative button');
                removeButton.addEventListener('click', function() {
                    workReference.remove();
                });
            });
        });


        //workExperience JS

        document.addEventListener('DOMContentLoaded', function() {
            const addButton = document.getElementById('addExperience');
            const workExperienceContainer = document.getElementById('workExperienceContainer');

            addButton.addEventListener('click', function() {
                const workExperience = document.createElement('div');
                workExperience.classList.add('work-experience');
                workExperience.innerHTML = `
                    <div class="relative">
                        <div class="relative mt-4">
                        <button class="absolute right-0 top-0 mt-1 mr-1 bg-red-500 text-white text-xs px-2 py-1 rounded">Remove</button>
                    </div>
                        <div>
                            <p class="font-semibold">Position:</p>
                            <input type="text" class="form-input w-full position" placeholder="Position">

                            <p class="font-semibold mt-2">Company:</p>
                            <input type="text" class="form-input w-full company mt-2" placeholder="Company">

                            <p class="font-semibold mt-2">Duration:</p>
                            <input type="text" class="form-input w-full duration mt-2" placeholder="Duration">

                            <p class="font-semibold mt-2">Responsibility:</p>
                            <textarea class="form-input w-full responsibility mt-2" rows="4" cols="50" placeholder="Responsibility"></textarea>
                        </div>
                    </div>
                   
                `;
                workExperienceContainer.appendChild(workExperience);

                const removeButton = workExperience.querySelector('.relative button');
                removeButton.addEventListener('click', function() {
                    workExperience.remove();
                });
            });
        });

        //eduction JS
        document.addEventListener('DOMContentLoaded', function() {
            const addButton = document.getElementById('addEducation');
            const educationContainer = document.getElementById('educationContainer');

            addButton.addEventListener('click', function() {
                const education = document.createElement('div');
                education.classList.add('education');
                education.innerHTML = `
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <p class="font-semibold">School Name:</p>
                            <input type="text" class="form-input w-full school" placeholder="School Name">

                            <p class="font-semibold">Level:</p>
                            <input type="text" class="form-input w-full level" placeholder="Level">

                            <p class="font-semibold mt-2">Duration:</p>
                            <input type="text" class="form-input w-full duration mt-2" placeholder="Duration">

                            <p class="font-semibold mt-2">Subject:</p>
                            <input type="text" class="form-input w-full subject mt-2" placeholder="Subject">

                            <p class="font-semibold mt-2">Score:</p>
                            <input type="text" class="form-input w-full score mt-2" placeholder="Score">
                        </div>
                    </div>
                    <div class="relative mt-4">
                        <button class="absolute right-0 top-0 mt-1 mr-1 bg-red-500 text-white text-xs px-2 py-1 rounded">Remove</button>
                    </div>
                `;
                educationContainer.appendChild(education);

                const removeButton = education.querySelector('.relative button');
                removeButton.addEventListener('click', function() {
                    education.remove();
                });
            });
        });

        document.addEventListener('DOMContentLoaded', function() {
            const addSkillButton = document.getElementById('addSkill');
            const skillsContainer = document.getElementById('skillsContainer');

            addSkillButton.addEventListener('click', function() {
                const skillInput = document.createElement('div');
                skillInput.classList.add('grid', 'grid-cols-2', 'gap-4');
                const skillNumber = document.querySelectorAll('.skill').length + 1;

                const label = document.createElement('label');
                label.htmlFor = 'skill' + skillNumber;
                label.textContent = 'Skill ' + skillNumber + ':';
                label.classList.add('font-semibold');

                const input = document.createElement('input');
                input.type = 'text';
                input.id = 'skill' + skillNumber;
                input.classList.add('form-input', 'w-full', 'skill');
                input.placeholder = 'Enter Skill';

                skillInput.appendChild(label);
                skillInput.appendChild(input);
                skillsContainer.appendChild(skillInput);
            });
        });


        function collectFormData() {
            const formData = {
                personalDetails: {
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    address: document.getElementById('address').value,
                    phone: document.getElementById('phone').value,
                    dateOfBirth: document.getElementById('dateOfBirth').value,
                    gender: document.getElementById('gender').value,
                    maritalStatus: document.getElementById('maritalStatus').value
                },
                education: [],
                workExperience: [],
                workReference: [],
                skills: []
            };

            // Collect education data
            const educationItems = document.querySelectorAll('.education');
            educationItems.forEach((item, index) => {
                formData.education.push({
                    school: item.querySelector('.school').value,
                    level: item.querySelector('.level').value,
                    duration: item.querySelector('.duration').value,
                    subject: item.querySelector('.subject').value,
                    score: item.querySelector('.score').value
                });
            });

            // Collect work experience data
            const experienceItems = document.querySelectorAll('.work-experience');
            experienceItems.forEach((item, index) => {
                formData.workExperience.push({
                    position: item.querySelector('.position').value,
                    company: item.querySelector('.company').value,
                    duration: item.querySelector('.duration').value,
                    responsibility: item.querySelector('.responsibility').value
                });
            });

            // Collect work reference data
            const referenceItems = document.querySelectorAll('.work-reference');
            referenceItems.forEach((item, index) => {
                formData.workReference.push({
                    position: item.querySelector('.position').value,
                    company: item.querySelector('.company').value,
                    duration: item.querySelector('.duration').value,
                    contactName: item.querySelector('.contact-name').value,
                    contactSurname: item.querySelector('.contact-surname').value,
                    contactEmail: item.querySelector('.contact-email').value,
                    contactPhone: item.querySelector('.contact-phone').value,
                    contactPosition: item.querySelector('.contact-position').value
                });
            });

            // Collect skills data
            const skillInputs = document.querySelectorAll('.skill');
            skillInputs.forEach((input, index) => {
                formData.skills.push(input.value);
            });

            return formData;
        }

        // Function to send form data to backend
        function sendData(formData) {
            fetch('/generate-cv', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                // Handle response from backend
                console.log(data);
            })
            .catch(error => {
                // Handle error
                console.error('Error:', error);
            });
        }

        // Event listener for submit button click
        document.getElementById('save').addEventListener('click', function() {
            const formData = collectFormData();
            sendData(formData);
        });

    </script>
</body>
</html>
